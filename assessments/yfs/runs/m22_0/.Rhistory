profilesummary <- SSsummarize(profilemodels)
PinerPlot(profilesummary,plot=TRUE,ymax=50)
PinerPlot(profilesummary,plot=TRUE,ymax=10)
base_m4 <- SS_output("/Users/ingridspies/admbmodels/AI_Pcod/2022_SS/")
base_m4 <- SS_output("/Users/ingridspies/admbmodels/AI_Pcod/2022-SS/Stock_Synthesis_files")
base_m4 <- SS_output("/Users/ingridspies/admbmodels/AI_Pcod/2022-SS/AI_Pcod-SS/Stock_Synthesis_files")
base_m4 <- SS_output("/Users/ingridspies/admbmodels/AI_Pcod/2022_SS/AI_Pcod-SS/Stock_Synthesis_files")
base_m4 <- SS_output("/Users/ingridspies/admbmodels/AI_Pcod/2022_SS/AI_Pcod-SS/Stock_Synthesis_files/Model4")
baser0 <- base_m4$parameters[base_m4$parameters$Label=='SR_LN(R0)','Value']
r0.vec <- seq(baser0-2,baser0+4,1)
r0.vec
SS_profile(dir =  here("/Users/ingridspies/admbmodels/AI_Pcod/2022_SS/AI_Pcod-SS/Stock_Synthesis_files/Model4/profile1"),
string = "SR_LN(R0)",
profilevec = r0.vec)
profile(dir =  here("/Users/ingridspies/admbmodels/AI_Pcod/2022_SS/AI_Pcod-SS/Stock_Synthesis_files/Model4/profile1"),
string = "SR_LN(R0)",
profilevec = r0.vec)
profile(dir =  ("/Users/ingridspies/admbmodels/AI_Pcod/2022_SS/AI_Pcod-SS/Stock_Synthesis_files/Model4/profile1"),
string = "SR_LN(R0)",
profilevec = r0.vec)
profile(dir =  ("/Users/ingridspies/admbmodels/AI_Pcod/2022_SS/AI_Pcod-SS/Stock_Synthesis_files/Model4/profile1/"),
string = "SR_LN(R0)",
profilevec = r0.vec)
r4ss::profile(dir =  ("/Users/ingridspies/admbmodels/AI_Pcod/2022_SS/AI_Pcod-SS/Stock_Synthesis_files/Model4/profile1/"),
string = "SR_LN(R0)",
profilevec = r0.vec)
r4ss::profile(dir =  ("/Users/ingridspies/admbmodels/AI_Pcod/2022_SS/AI_Pcod-SS/Stock_Synthesis_files/Model4/profile1/"),
exe = "ss_osx",
string = "SR_LN(R0)",
profilevec = r0.vec)
profiles_r0 <- SSgetoutput(dirvec = "/Users/ingridspies/admbmodels/AI_Pcod/2022_SS/AI_Pcod-SS/Stock_Synthesis_files/Model4/profile1/",
keyvec = 1:length(r0.vec))
profiles_r0_summary <- SSsummarize(profiles_r0)
save(profiles_r0_summary,
file = "/Users/ingridspies/admbmodels/AI_Pcod/2022_SS/AI_Pcod-SS/Stock_Synthesis_files/Model4/profile1/profile_r0_summary.rdata")
SSplotProfile(profiles_r0_summary, # summary object
add_cutoff = T, ymax = 5, legendloc = 'topleft',
profile.string = "SR_LN", # substring of profile parameter
profile.label = "Unfished Recruitment"
)
PinerPlot(profiles_r0_summary,ymax=10)
PinerPlot(profiles_r0_summary)
SSplotProfile(profiles_r0_summary, # summary object
add_cutoff = T, ymax = 5, legendloc = 'topleft',
profile.string = "SR_LN", # substring of profile parameter
profile.label = "Unfished Recruitment"
)
SSplotProfile(profiles_r0_summary, # summary object
add_cutoff = T, ymax = 10, legendloc = 'topleft',
profile.string = "SR_LN", # substring of profile parameter
profile.label = "Unfished Recruitment"
)
SSplotProfile(profiles_r0_summary, # summary object
add_cutoff = T, ymax = 13, legendloc = 'topleft',
profile.string = "SR_LN", # substring of profile parameter
profile.label = "Unfished Recruitment"
)
PinerPlot(profiles_r0_summary)
SSplotProfile(profiles_r0_summary, # summary object
add_cutoff = T, ymax = 13, legendloc = 'topleft',
profile.string = "SR_LN", # substring of profile parameter
profile.label = "Unfished Recruitment"
)
PinerPlot(profiles_r0_summary)
SSplotPars(base_m4)
mod4 <- SS_output(dir = dir4)
SS_plots(mod4)
r4ss::profile(dir =  ("/Users/ingridspies/admbmodels/AI_Pcod/2022_SS/AI_Pcod-SS/Stock_Synthesis_files/Model4/profile2_sigmaqoff/"),
exe = "ss_osx",
string = "SR_LN(R0)",
profilevec = r0.vec)
profiles_r0 <- SSgetoutput(dirvec = "/Users/ingridspies/admbmodels/AI_Pcod/2022_SS/AI_Pcod-SS/Stock_Synthesis_files/Model4/profile2_sigmaqoff/",
keyvec = 1:length(r0.vec))
profiles_r0_summary <- SSsummarize(profiles_r0)
save(profiles_r0_summary,
file = "/Users/ingridspies/admbmodels/AI_Pcod/2022_SS/AI_Pcod-SS/Stock_Synthesis_files/Model4/profile2_sigmaqoff/profile_r0_summary.rdata")
SSplotProfile(profiles_r0_summary, # summary object
add_cutoff = T, ymax = 13, legendloc = 'topleft',
profile.string = "SR_LN", # substring of profile parameter
profile.label = "Unfished Recruitment"
)
PinerPlot(profiles_r0_summary)
PinerPlot(profiles_r0_summary)
SSplotProfile(profiles_r0_summary, # summary object
add_cutoff = T, ymax = 13, legendloc = 'topleft',
profile.string = "SR_LN", # substring of profile parameter
profile.label = "Unfished Recruitment"
)
mod1 <- SS_output(dir = dir1)
SS_plots(mod1)
base_m1 <- SS_output("/Users/ingridspies/admbmodels/AI_Pcod/2022_SS/AI_Pcod-SS/Stock_Synthesis_files/Model1")
baser0 <- base_m1$parameters[base_m1$parameters$Label=='SR_LN(R0)','Value']
r0.vec <- seq(baser0-4,baser0+6,.5)
r4ss::profile(dir =  ("/Users/ingridspies/admbmodels/AI_Pcod/2022_SS/AI_Pcod-SS/Stock_Synthesis_files/Model1/profile1_sigmaRfixed/"),
exe = "ss_osx",
string = "SR_LN(R0)",
profilevec = r0.vec)
profiles_r0 <- SSgetoutput(dirvec = "/Users/ingridspies/admbmodels/AI_Pcod/2022_SS/AI_Pcod-SS/Stock_Synthesis_files/Model1/profile1_sigmaRfixed/",
keyvec = 1:length(r0.vec))
r4ss::profile(dir =  ("/Users/ingridspies/admbmodels/AI_Pcod/2022_SS/AI_Pcod-SS/Stock_Synthesis_files/Model1/profile1_sigmaRfixed/"),
exe = "ss_osx",
string = "SR_LN(R0)",
profilevec = r0.vec)
baser0 <- base_m1$parameters[base_m1$parameters$Label=='SR_LN(R0)','Value']
r0.vec <- seq(baser0-4,baser0+6,1)
r0.vec
baser0 <- base_m1$parameters[base_m1$parameters$Label=='SR_LN(R0)','Value']
r0.vec <- seq(baser0-2,baser0+4,1)
r4ss::profile(dir =  ("/Users/ingridspies/admbmodels/AI_Pcod/2022_SS/AI_Pcod-SS/Stock_Synthesis_files/Model1/profile1_sigmaRfixed/"),
exe = "ss_osx",
string = "SR_LN(R0)",
profilevec = r0.vec)
mod1 <- SS_output(dir = dir1)
SS_plots(mod1)
baser0 <- base_m1$parameters[base_m1$parameters$Label=='SR_LN(R0)','Value']
r0.vec <- seq(baser0-1,baser0+1,1)
r4ss::profile(dir =  ("/Users/ingridspies/admbmodels/AI_Pcod/2022_SS/AI_Pcod-SS/Stock_Synthesis_files/Model1/profile1_sigmaRfixed/"),
exe = "ss_osx",
string = "SR_LN(R0)",
profilevec = r0.vec)
base_m1 <- SS_output("/Users/ingridspies/admbmodels/AI_Pcod/2022_SS/AI_Pcod-SS/Stock_Synthesis_files/Model1")
baser0 <- base_m1$parameters[base_m1$parameters$Label=='SR_LN(R0)','Value']
r0.vec <- seq(baser0-1,baser0+1,1)
r0.vec
r4ss::profile(dir =  ("/Users/ingridspies/admbmodels/AI_Pcod/2022_SS/AI_Pcod-SS/Stock_Synthesis_files/Model1/profile1_sigmaRfixed/"),
exe = "ss_osx",
string = "SR_LN(R0)",
profilevec = r0.vec)
r4ss::profile(dir =  ("/Users/ingridspies/admbmodels/AI_Pcod/2022_SS/AI_Pcod-SS/Stock_Synthesis_files/Model1/profile1_sigmaRfixed/"),
exe = "ss_osx",
string = "SR_LN(R0)",
profilevec = r0.vec)
r4ss::profile(dir =  ("/Users/ingridspies/admbmodels/AI_Pcod/2022_SS/AI_Pcod-SS/Stock_Synthesis_files/Model1/profile1_sigmaRfixed/"),
exe = "ss_osx",
string = "SR_LN(R0)",
profilevec = r0.vec)
mod1 <- SS_output(dir = dir1)
SS_plots(mod1)
base_m1 <- SS_output("/Users/ingridspies/admbmodels/AI_Pcod/2022_SS/AI_Pcod-SS/Stock_Synthesis_files/Model1")
baser0 <- base_m1$parameters[base_m1$parameters$Label=='SR_LN(R0)','Value']
r0.vec <- seq(baser0-1,baser0+1,1)
r4ss::profile(dir =  ("/Users/ingridspies/admbmodels/AI_Pcod/2022_SS/AI_Pcod-SS/Stock_Synthesis_files/Model1/profile1_sigmaRfixed/"),
exe = "ss_osx",
string = "SR_LN(R0)",
profilevec = r0.vec)
r4ss::profile(dir =  ("/Users/ingridspies/admbmodels/AI_Pcod/2022_SS/AI_Pcod-SS/Stock_Synthesis_files/Model1/profile1_sigmaRfixed/"),
exe = "ss_osx",
string = "SR_LN(R0)",
profilevec = r0.vec)
profiles_r0 <- SSgetoutput(dirvec = "/Users/ingridspies/admbmodels/AI_Pcod/2022_SS/AI_Pcod-SS/Stock_Synthesis_files/Model1/profile1_sigmaRfixed/",
keyvec = 1:length(r0.vec))
profiles_r0_summary <- SSsummarize(profiles_r0)
save(profiles_r0_summary,
file = "/Users/ingridspies/admbmodels/AI_Pcod/2022_SS/AI_Pcod-SS/Stock_Synthesis_files/Model1/profile1_sigmaRfixed/profile_r0_summary.rdata")
SSplotProfile(profiles_r0_summary, # summary object
add_cutoff = T, ymax = 13, legendloc = 'topleft',
profile.string = "SR_LN", # substring of profile parameter
profile.label = "Unfished Recruitment"
)
SSplotProfile(profiles_r0_summary, # summary object
add_cutoff = T, ymax = 30, legendloc = 'topleft',
profile.string = "SR_LN", # substring of profile parameter
profile.label = "Unfished Recruitment"
)
SSplotProfile(profiles_r0_summary, # summary object
add_cutoff = T, ymax = 50, legendloc = 'topleft',
profile.string = "SR_LN", # substring of profile parameter
profile.label = "Unfished Recruitment"
)
PinerPlot(profiles_r0_summary)
baser0 <- base_m1$parameters[base_m1$parameters$Label=='SR_LN(R0)','Value']
r0.vec <- seq(baser0-4,baser0+6,.5)
r4ss::profile(dir =  ("/Users/ingridspies/admbmodels/AI_Pcod/2022_SS/AI_Pcod-SS/Stock_Synthesis_files/Model1/profile1_sigmaRfixed/"),
exe = "ss_osx",
string = "SR_LN(R0)",
profilevec = r0.vec)
baser0 <- base_m1$parameters[base_m1$parameters$Label=='SR_LN(R0)','Value']
r0.vec <- seq(baser0-4,baser0+6,1)
r4ss::profile(dir =  ("/Users/ingridspies/admbmodels/AI_Pcod/2022_SS/AI_Pcod-SS/Stock_Synthesis_files/Model1/profile1_sigmaRfixed/"),
exe = "ss_osx",
string = "SR_LN(R0)",
profilevec = r0.vec)
profiles_r0 <- SSgetoutput(dirvec = "/Users/ingridspies/admbmodels/AI_Pcod/2022_SS/AI_Pcod-SS/Stock_Synthesis_files/Model1/profile1_sigmaRfixed/",
keyvec = 1:length(r0.vec))
profiles_r0_summary <- SSsummarize(profiles_r0)
save(profiles_r0_summary,
file = "/Users/ingridspies/admbmodels/AI_Pcod/2022_SS/AI_Pcod-SS/Stock_Synthesis_files/Model1/profile1_sigmaRfixed/profile_r0_summary.rdata")
SSplotProfile(profiles_r0_summary, # summary object
add_cutoff = T, ymax = 50, legendloc = 'topleft',
profile.string = "SR_LN", # substring of profile parameter
profile.label = "Unfished Recruitment"
)
PinerPlot(profiles_r0_summary)
R0.vec
baser0
baser0 <- base_m1$parameters[base_m1$parameters$Label=='SR_LN(R0)','Value']
r0.vec <- seq(baser0-4,baser0+6,1)
baser0
R0.vec
baser0 <- base_m1$parameters[base_m1$parameters$Label=='SR_LN(R0)','Value']
r0.vec <- seq(baser0-4,baser0+6,1)
R0.vec
baser0+6
r0.vec
SSplotProfile(profiles_r0_summary, # summary object
add_cutoff = T, ymax = 100, legendloc = 'topleft',
profile.string = "SR_LN", # substring of profile parameter
profile.label = "Unfished Recruitment"
)
r0.vec
baser0-4
PinerPlot(profiles_r0_summary)
base_m1 <- SS_output("/Users/ingridspies/admbmodels/AI_Pcod/2022_SS/AI_Pcod-SS/Stock_Synthesis_files/Model1")
baser0 <- base_m1$parameters[base_m1$parameters$Label=='SR_LN(R0)','Value']
r0.vec <- seq(baser0-2,baser0+2,1)
r0.vec
r4ss::profile(dir =  ("/Users/ingridspies/admbmodels/AI_Pcod/2022_SS/AI_Pcod-SS/Stock_Synthesis_files/Model1/profile2_sigmaRfixed/"),
exe = "ss_osx",
string = "SR_LN(R0)",
profilevec = r0.vec)
profiles_r0 <- SSgetoutput(dirvec = "/Users/ingridspies/admbmodels/AI_Pcod/2022_SS/AI_Pcod-SS/Stock_Synthesis_files/Model1/profile2_sigmaRfixed/",
keyvec = 1:length(r0.vec))
profiles_r0_summary <- SSsummarize(profiles_r0)
save(profiles_r0_summary,
file = "/Users/ingridspies/admbmodels/AI_Pcod/2022_SS/AI_Pcod-SS/Stock_Synthesis_files/Model1/profile2_sigmaRfixed/profile_r0_summary.rdata")
SSplotProfile(profiles_r0_summary, # summary object
add_cutoff = T, ymax = 100, legendloc = 'topleft',
profile.string = "SR_LN", # substring of profile parameter
profile.label = "Unfished Recruitment"
)
SSplotProfile(profiles_r0_summary, # summary object
add_cutoff = T, ymax = 100, legendloc = 'topleft',
profile.string = "SR_LN", # substring of profile parameter
profile.label = "Unfished Recruitment"
)
PinerPlot(profiles_r0_summary)
SSplotProfile(profiles_r0_summary, # summary object
add_cutoff = T, ymax = 5, legendloc = 'topleft',
profile.string = "SR_LN", # substring of profile parameter
profile.label = "Unfished Recruitment"
)
SSplotProfile(profiles_r0_summary, # summary object
add_cutoff = T, ymax = 10, legendloc = 'topleft',
profile.string = "SR_LN", # substring of profile parameter
profile.label = "Unfished Recruitment"
)
SSplotProfile(profiles_r0_summary, # summary object
add_cutoff = T, ymax = 15, legendloc = 'topleft',
profile.string = "SR_LN", # substring of profile parameter
profile.label = "Unfished Recruitment"
)
SSplotProfile(profiles_r0_summary, # summary object
add_cutoff = T, ymax = 25, legendloc = 'topleft',
profile.string = "SR_LN", # substring of profile parameter
profile.label = "Unfished Recruitment"
)
PinerPlot(profiles_r0_summary)
PinerPlot(profiles_r0_summary,ymax=10)
PinerPlot(profiles_r0_summary,ymax=25)
PinerPlot(profiles_r0_summary,ymax=20)
PinerPlot(profiles_r0_summary,ymax=5)
base_m1 <- SS_output("/Users/ingridspies/admbmodels/AI_Pcod/2022_SS/AI_Pcod-SS/Stock_Synthesis_files/Model4")
profiles_r0 <- SSgetoutput(dirvec = "/Users/ingridspies/admbmodels/AI_Pcod/2022_SS/AI_Pcod-SS/Stock_Synthesis_files/Model4/profile2_sigmaqoff/",
keyvec = 1:length(r0.vec))
profiles_r0_summary <- SSsummarize(profiles_r0)
SSplotProfile(profiles_r0_summary, # summary object
add_cutoff = T, ymax = 25, legendloc = 'topleft',
profile.string = "SR_LN", # substring of profile parameter
profile.label = "Unfished Recruitment"
)
PinerPlot(profiles_r0_summary,ymax=5)
PinerPlot(profiles_r0_summary,ymax=10)
PinerPlot(profiles_r0_summary,ymax=15)
baser0
baser0 <- base_m1$parameters[base_m1$parameters$Label=='SR_LN(R0)','Value']
baser0
r0.vec <- seq(baser0-2,baser0+3,.5)
r0.vec
r4ss::profile(dir =  ("/Users/ingridspies/admbmodels/AI_Pcod/2022_SS/AI_Pcod-SS/Stock_Synthesis_files/Model4/profile2_sigmaqoff/"),
exe = "ss_osx",
string = "SR_LN(R0)",
profilevec = r0.vec)
profiles_r0 <- SSgetoutput(dirvec = "/Users/ingridspies/admbmodels/AI_Pcod/2022_SS/AI_Pcod-SS/Stock_Synthesis_files/Model4/profile2_sigmaqoff/",
keyvec = 1:length(r0.vec))
profiles_r0_summary <- SSsummarize(profiles_r0)
save(profiles_r0_summary,
file = "/Users/ingridspies/admbmodels/AI_Pcod/2022_SS/AI_Pcod-SS/Stock_Synthesis_files/Model4/profile2_sigmaqoff/profile_r0_summary.rdata")
SSplotProfile(profiles_r0_summary, # summary object
add_cutoff = T, ymax = 25, legendloc = 'topleft',
profile.string = "SR_LN", # substring of profile parameter
profile.label = "Unfished Recruitment"
)
SSplotProfile(profiles_r0_summary, # summary object
add_cutoff = T, ymax = 45, legendloc = 'topleft',
profile.string = "SR_LN", # substring of profile parameter
profile.label = "Unfished Recruitment"
)
PinerPlot(profiles_r0_summary,ymax=15)
PinerPlot(profiles_r0_summary,ymax=55)
SSplotProfile(profiles_r0_summary, # summary object
add_cutoff = T, ymax = 4, legendloc = 'topleft',
profile.string = "SR_LN", # substring of profile parameter
profile.label = "Unfished Recruitment"
)
PinerPlot(profiles_r0_summary,ymax=5)
SSplotProfile(profiles_r0_summary, # summary object
add_cutoff = T, ymax = 4, legendloc = 'topleft',
profile.string = "SR_LN", # substring of profile parameter
profile.label = "Unfished Recruitment"
)
r4ss::profile(dir =  ("/Users/ingridspies/admbmodels/AI_Pcod/2022_SS/AI_Pcod-SS/Stock_Synthesis_files/Model4/profile2_sigmaqoff/"),
exe = "ss_osx",
string = "SR_LN(R0)",
profilevec = r0.vec)
profiles_r0 <- SSgetoutput(dirvec = "/Users/ingridspies/admbmodels/AI_Pcod/2022_SS/AI_Pcod-SS/Stock_Synthesis_files/Model4/profile2_sigmaqoff/",
keyvec = 1:length(r0.vec))
profiles_r0_summary <- SSsummarize(profiles_r0)
save(profiles_r0_summary,
file = "/Users/ingridspies/admbmodels/AI_Pcod/2022_SS/AI_Pcod-SS/Stock_Synthesis_files/Model4/profile2_sigmaqoff/profile_r0_summary.rdata")
SSplotProfile(profiles_r0_summary, # summary object
add_cutoff = T, ymax = 4, legendloc = 'topleft',
profile.string = "SR_LN", # substring of profile parameter
profile.label = "Unfished Recruitment"
)
PinerPlot(profiles_r0_summary,ymax=5)
SSplotProfile(profiles_r0_summary, # summary object
add_cutoff = T, ymax = 4, legendloc = 'topleft',
profile.string = "SR_LN", # substring of profile parameter
profile.label = "Unfished Recruitment"
)
SSplotProfile(profiles_r0_summary, # summary object
add_cutoff = T, ymax = 1, legendloc = 'topleft',
profile.string = "SR_LN", # substring of profile parameter
profile.label = "Unfished Recruitment"
)
SSplotProfile(profiles_r0_summary, # summary object
add_cutoff = T, ymax = 4, legendloc = 'topleft',
profile.string = "SR_LN", # substring of profile parameter
profile.label = "Unfished Recruitment"
)
PinerPlot(profiles_r0_summary,ymax=5)
PinerPlot(profiles_r0_summary,ymax=5)
SSplotProfile(profiles_r0_summary, # summary object
add_cutoff = T, ymax = 4, legendloc = 'topleft',
profile.string = "SR_LN", # substring of profile parameter
profile.label = "Unfished Recruitment"
)
SSplotProfile(profiles_r0_summary, # summary object
add_cutoff = T, ymax = 10, legendloc = 'topleft',
profile.string = "SR_LN", # substring of profile parameter
profile.label = "Unfished Recruitment"
)
PinerPlot(profiles_r0_summary,ymax=10)
PinerPlot(profiles_r0_summary,ymax=15)
PinerPlot(profiles_r0_summary,ymax=20)
PinerPlot(profiles_r0_summary,ymax=30)
PinerPlot(profiles_r0_summary,ymax=50)
yrs=length(YFS18_2$yrs_srv_age_s[4:41])
Age=rep(seq(1,20,1),each=yrs)
Frequency=c(Femz)
Femz=YFS18_2$oac_srv_s[4:41,1:20]
Malz=YFS18_2$oac_srv_s[4:41,21:40]
yrs=length(YFS18_2$yrs_srv_age_s[4:41])
Age=rep(seq(1,20,1),each=yrs)
Frequency=c(Femz)
Year=rep(YFS18_2$yrs_srv_age_s[4:41],length(yrs))
fishlen=data.frame(Year,Age,Frequency)
Fem <- ggplot(fishlen, aes(Age,Year)) +
geom_tile(aes(fill = Frequency),colour = "lightgrey")+
scale_fill_gradient(low = "white",high = "darkblue")+
scale_y_continuous(breaks=seq(1979,2021,2),labels=seq(1979,2021,2))+
ggtitle("YFS Ages - Survey Females") +
theme(axis.text.y=element_text(size=rel(.7)))+theme_bw()
yrs=length(YFS18_2$yrs_srv_age_s[4:41])
Age=rep(seq(1,20,1),each=yrs)
Frequency=c(Femz)
Year=rep(YFS18_2$yrs_srv_age_s[4:41],length(yrs))
fishlen=data.frame(Year,Age,Frequency)
Fem <- ggplot(fishlen, aes(Age,Year)) +
geom_tile(aes(fill = Frequency),colour = "lightgrey")+
scale_fill_gradient(low = "white",high = "darkblue")+
scale_y_continuous(breaks=seq(1979,2021,2),labels=seq(1979,2021,2))+
ggtitle("YFS Ages - Survey Females") +
theme(axis.text.y=element_text(size=rel(.7)))+theme_bw()
Fem
24/43
21977/32590
YFS18_2_1sel$wt_like
YFS18_2$wt_like
YFS18_2$age_likeihood_for_survey
YFS18_2_1sel$age_likeihood_for_survey
YFS18_2$age_likeihood_for_fishery
YFS18_2_1sel$age_likeihood_for_fishery
YFS18_2_1sel$catch_likelihood
YFS18_2$catch_likelihood
YFS18_2_1sel$survey_likelihood
YFS18_2$survey_likelihood
YFS18_2_1sel$selectivity_likelihood
YFS18_2$selectivity_likelihood
YFS18_2$recruitment_likelilhood
YFS18_2_1sel$recruitment_likelilhood
library(r4ss);library(corpcor) #first get these libraries
install.packages("corpcor",repos="https://cloud.r-project.org",dependencies=TRUE)
install.packages("corpcor", repos = "https://cloud.r-project.org", dependencies = TRUE)
#source code - use this function.
get.admb.hes <- function(model.path=getwd()){
wd.old <- getwd(); on.exit(setwd(wd.old))
setwd(model.path)
filename <- file("admodel.hes", "rb")
on.exit(close(filename), add=TRUE)
num.pars <- readBin(filename, "integer", 1)
hes.vec <- readBin(filename, "numeric", num.pars^2)
hes <- matrix(hes.vec, ncol=num.pars, nrow=num.pars)
hybrid_bounded_flag <- readBin(filename, "integer", 1)
scale <- readBin(filename, "numeric", num.pars)
result <- list(num.pars=num.pars, hes=hes,
hybrid_bounded_flag=hybrid_bounded_flag, scale=scale)
return(result)
}
#this pulls out the hessian and then transforms it into parameter space
dir1="/Users/ingridspies/admbmodels/flatfish/assessments/yfs/2022/runs/m18_2"
setwd(dir1)
setwd("dir1")
#this pulls out the hessian and then transforms it into parameter space
dir1="/Users/ingridspies/admbmodels/flatfish/assessments/yfs/runs/m18_2"
setwd("dir1")
setwd(dir1)
#this pulls out the hessian and then transforms it into parameter space
dir1="/Users/ingridspies/admbmodels/flatfish/assessments/yfs/runs/m18_2/"
dir2="/Users/ingridspies/admbmodels/flatfish/assessments/yfs/runs/m18_2_1sel/"
dir3="/Users/ingridspies/admbmodels/flatfish/assessments/yfs/runs/m18_2_growth/"
#setwd("/Users/ingridspies/admbmodels/Katch/assessments/GOA_ATF/runs/m2/")
HESS = get.admb.hes()
# Calculate Hessian
cov <- pseudoinverse(HESS$hes)
scale <- HESS$scale
cov.bounded <- cov*(scale %o% scale)
Hess = pseudoinverse(cov.bounded)
Hess
#this pulls out the hessian and then transforms it into parameter space
dir1="/Users/ingridspies/admbmodels/flatfish/assessments/yfs/runs/m18_2/"#663 pars
dir2="/Users/ingridspies/admbmodels/flatfish/assessments/yfs/runs/m18_2_1sel/"  #661 pars
dir3="/Users/ingridspies/admbmodels/flatfish/assessments/yfs/runs/m18_2_growth/"#664 pars
setwd(dir1)
#setwd("/Users/ingridspies/admbmodels/Katch/assessments/GOA_ATF/runs/m2/")
HESS = get.admb.hes()
# Calculate Hessian
cov <- pseudoinverse(HESS$hes)
scale <- HESS$scale
cov.bounded <- cov*(scale %o% scale)
Hess = pseudoinverse(cov.bounded)
NLL=1388.87545619181 #objective function?
num.pars=663
LnDet = determinant(Hess, logarithm=TRUE)$modulus[[1]]
Ln_Integral = log(2*pi) + (-1/2)*sum(LnDet) + -1*NLL#this is the MARGINAL likelihood
AIC = -2*Ln_Integral + 2*num.pars;AIC
setwd(dir2)#dir2
NLL=1386.31431003653 #objective function?
num.pars=661
LnDet = determinant(Hess, logarithm=TRUE)$modulus[[1]]
Ln_Integral = log(2*pi) + (-1/2)*sum(LnDet) + -1*NLL#this is the MARGINAL likelihood
AIC = -2*Ln_Integral + 2*num.pars;AIC
NLL=1434.38132675409 #objective function?
num.pars=664
LnDet = determinant(Hess, logarithm=TRUE)$modulus[[1]]
Ln_Integral = log(2*pi) + (-1/2)*sum(LnDet) + -1*NLL#this is the MARGINAL likelihood
AIC = -2*Ln_Integral + 2*num.pars;AIC
raw_age=read.csv("/Users/ingridspies/Documents/WorkDellStuff/Assessments/AI_Cod/2019/Data/Age/AI Pacific cod ages - Spies.csv",header=TRUE)
raw_age2=raw_age[which(raw_age$year_read>2007),]
dim(raw_age2)
dim(raw_age)
9213-9121
92/9213
AI_M4$rec_dev
var(AI_M4$rec_dev)
sqrt(var(AI_M4$rec_dev))
NLL=1388.87545619181 #objective function?
num.pars=514
LnDet = determinant(Hess, logarithm=TRUE)$modulus[[1]]
Ln_Integral = log(2*pi) + (-1/2)*sum(LnDet) + -1*NLL#this is the MARGINAL likelihood
AIC = -2*Ln_Integral + 2*num.pars;AIC
NLL=1386.31431003653 #objective function?
num.pars=512
LnDet = determinant(Hess, logarithm=TRUE)$modulus[[1]]
Ln_Integral = log(2*pi) + (-1/2)*sum(LnDet) + -1*NLL#this is the MARGINAL likelihood
AIC = -2*Ln_Integral + 2*num.pars;AIC
NLL=1434.38132675409 #objective function?
num.pars=514
LnDet = determinant(Hess, logarithm=TRUE)$modulus[[1]]
Ln_Integral = log(2*pi) + (-1/2)*sum(LnDet) + -1*NLL#this is the MARGINAL likelihood
AIC = -2*Ln_Integral + 2*num.pars;AIC
srvsel2=data.frame(cbind(seq(1,20,1),YFS18_2$sel_srv_f,YFS18_2$sel_srv_m))
colnames(srvsel2)=c("Age","Female","Male")
p2=ggplot(data=srvsel2)+geom_line(aes(x=Age,y=Female,col="Female"))+geom_line(aes(x=Age,y=Male,col="Male"))+theme_bw()+
theme(legend.title=element_text(size=13),legend.text=element_text(size=11),axis.text=element_text(size=11),axis.title.x = element_text(size=13),axis.title.y = element_text(size=14))+
ylab("Proportion selected")+scale_x_continuous(breaks = seq(1,20, by = 2))+scale_color_discrete(name="")+ggtitle("Model 18.2")
srvsel1=data.frame(cbind(seq(1,20,1),YFS2020$sel_srv_f,YFS2020$sel_srv_m))
YFS2020=read.rep("/Users/ingridspies/admbmodels/flatfish/assessments/yfs/runs/m2020/fm.rep")#last years model
srvsel2=data.frame(cbind(seq(1,20,1),YFS18_2$sel_srv_f,YFS18_2$sel_srv_m))
colnames(srvsel2)=c("Age","Female","Male")
p2=ggplot(data=srvsel2)+geom_line(aes(x=Age,y=Female,col="Female"))+geom_line(aes(x=Age,y=Male,col="Male"))+theme_bw()+
theme(legend.title=element_text(size=13),legend.text=element_text(size=11),axis.text=element_text(size=11),axis.title.x = element_text(size=13),axis.title.y = element_text(size=14))+
ylab("Proportion selected")+scale_x_continuous(breaks = seq(1,20, by = 2))+scale_color_discrete(name="")+ggtitle("Model 18.2")
p2
YFS18_2$ob_bts
plot(YFS18_2$ob_bts)
plot(YFS18_2$ob_bts,type="l")
plot(YFS18_2$ob_bts,type="l",ylim=c(0,4000))
plot(YFS18_2$yrs_srv,YFS18_2$ob_bts,type="l",ylim=c(0,4000))
YFS18_2$survey_likelihood
YFS18_2_growth$survey_likelihood
YFS18_2growth_mnhind$survey_likelihood
